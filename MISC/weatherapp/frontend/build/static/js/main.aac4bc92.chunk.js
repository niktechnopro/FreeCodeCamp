(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(66)},42:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),s=a.n(o),i=a(5),c=a(7),u=a(31),l=a(2),d="WEATHER_INFO_SUCCESS",p="WEATHER_INFO_FAILURE",h="WEATHER_INFO_START",m="AUTO_INFO_SUCCESS",f="AUTO_INFO_FAILURE",g="AUTO_INFO_START",w="IP_ADDRESS_LOOKUP",E="GET_FORECAST_BEGIN",y="GET_FORECAST_SUCCESS",b="GET_FORECAST_FAILED",O="SET_WEATHER_GRAPH_DATA",D={geoData:null,weatherData:null,error:null,is_Loading:!1,autodetect:!1,latlng:null,geoResults:null,weatherForecast:null,timeWeatherObject:null},j=(a(42),function(){return r.a.createElement("header",{id:"headerWrap"},r.a.createElement("p",{id:"header"},"Simple Weather App"),r.a.createElement("p",{className:"belowHeader"},"Built with React.js + Redux, Node.js + Express.js,"),r.a.createElement("p",{className:"belowHeader"},"Google Maps API + Open Weather Map API"))}),v=function(){return r.a.createElement("div",{id:"footerWrap"},r.a.createElement("footer",{id:"footer"},"\xa9 ",(new Date).getFullYear()," Developped by Nik"))},F=a(10),L=a(11),S=a(14),T=a(12),W=a(15),_=a(8),C=a.n(_),k="https://wapi.niktechnopro.com",A=k+"/getweather",N=k+"/basedOnLatLon",x="http://ip-api.com/json",R=k+"/forecast";function I(e){return function(t){return t({type:h}),C.a.post(A,{address:e}).then(function(e){t(function(e){return{type:d,payload:e}}(e))}).catch(function(e){t({type:p,payload:"error"})})}}function U(e){return function(t){return t(M()),C.a.post(N,{latlng:{lat:e.latitude,lng:e.longitude,accuracy:e.accuracy}}).then(function(e){t(function(e){return{type:m,payload:e}}(e))}).catch(function(e){t(B(e))})}}function M(){return{type:g}}function B(e){return{type:f,payload:"error"}}function H(){return function(e){return e(M()),C.a.get(x).then(function(t){if(200===t.status){var a=t.data,n={latitude:a.lat,longitude:a.lon,accuracy:20};return e(function(e){return{type:w,payload:e}}(n)),n}}).catch(function(t){console.log(t),e(B())})}}function P(e){return function(t){return t({type:E}),C.a.post(R,{latlng:e}).then(function(e){if(200===e.status){var a=e.data.weatherData;t(function(e){return{type:y,payload:e}}(a))}else t(G("wrong status code"))}).catch(function(e){t(G(e))})}}function G(e){return{type:b,payload:e}}function q(e){return{type:O,payload:e}}var J=function(e){function t(){var e;return Object(F.a)(this,t),(e=Object(S.a)(this,Object(T.a)(t).call(this))).componentDidUpdate=function(t,a){e.state.isFirstLoad&&t.autodetect&&!e.props.autodetect&&e.setState({isFirstLoad:!1})},e.ipLookupAddress=function(){return e.props.onIPaddressLookup()},e.componentDidMount=function(){e.keyDownListener=document.addEventListener("keydown",e.buttonHandler),e.keyUpListener=document.addEventListener("keyup",e.buttonUp),navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t,a){if(t){var n=t.coords;e.props.onAutoDetectCoordinates(n)}else e.ipLookupAddress().then(function(t){t&&e.props.onAutoDetectCoordinates(t)})}),e.searchButton=document.querySelector('[type="button"]')},e.componentWillUnmount=function(){e.keyDownListener.remove(),e.keyDownListener=null,e.keyUpListener.remove(),e.keyUpListener=null},e.buttonHandler=function(t){13===t.keyCode&&e.state.address.length>0&&(e.searchButton.classList.add("classToAdd"),e.setState({focus:!1}),e.props.onSendCoordinates(e.state.address).then(function(t){e.setState({address:""})}))},e.buttonUp=function(t){13===t.keyCode&&e.searchButton.classList.remove("classToAdd")},e.handleInput=function(t){var a=t.target.value;e.setState({address:a})},e.handleSubmitButton=function(t){t.preventDefault(),e.setState({focus:!1}),e.props.onSendCoordinates(e.state.address).then(function(t){e.setState({address:""})})},e.onFocusClear=function(t){e.state.isFirstLoad&&e.props.autodetect&&e.props.is_Loading||e.setState({focus:!0})},e.forecastWeather=function(){e.props.onGetForecast(e.props.geoResults)},e.resetTimeWeatherObject=function(){e.props.onTimeWeatherObject(null)},e.state={address:"",focus:!1,isFirstLoad:!0},e.keyListener=null,e}return Object(W.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props.timeWeatherObject,t=this.state.isFirstLoad||this.props.autodetect?r.a.createElement("p",null,"Detecting your Location..."):r.a.createElement("p",null,"Address That We Found:"),a=this.props.error?r.a.createElement("p",null,"Try again..."):t,n=!this.props.error&&!this.state.focus&&this.props.geoData&&!this.props.weatherForecast,o=!(this.state.focus||!e);return r.a.createElement("div",{id:"inputAreaWrapper"},r.a.createElement("section",{id:"sectionTop"},r.a.createElement("input",{id:"address",type:"text",placeholder:"enter location here",onChange:this.handleInput,value:this.state.address,onFocus:this.onFocusClear})),r.a.createElement("section",{id:"sectionMiddle"},r.a.createElement("input",{type:n?"forecastBTN":"button",value:n?"5 Days Forecast":o?"Back to 5 days forecast":"Find my weather",onClick:n?this.forecastWeather:o?this.resetTimeWeatherObject:this.handleSubmitButton})),(!this.state.focus||e)&&r.a.createElement("section",{is:"sectionBottom"},r.a.createElement("div",{id:"response"},!this.props.is_Loading||this.props.autodetect?a:r.a.createElement("p",null,"Searching..."),this.props.geoData?r.a.createElement("p",null,this.props.geoData):r.a.createElement("p",null))))}}]),t}(n.Component),Y=Object(i.b)(function(e){return{geoData:e.geoData,autodetect:e.autodetect,is_Loading:e.is_Loading,error:e.error,latlng:e.latlng,geoResults:e.geoResults,weatherForecast:e.weatherForecast,timeWeatherObject:e.timeWeatherObject}},function(e){return{onSendCoordinates:function(t){return e(I(t))},onAutoDetectCoordinates:function(t){return e(U(t))},onIPaddressLookup:function(){return e(H())},onGetForecast:function(t){return e(P(t))},onTimeWeatherObject:function(t){return e(q(t))}}})(J),K=a(4),z=a.n(K),Q=a(16),V=a(9),X=a(13),Z=a.n(X),$=function(e){var t=e.forecast;return r.a.createElement("div",{id:"forecastWrap"},r.a.createElement("p",{className:"weatherHeadline"},"Five days forecast"),r.a.createElement("div",{className:"forecast"},t.filter(function(e){return e.dt_txt.includes("12:00:00")}).map(function(a){var n,o=a.dt_txt.slice(5,10),s=a.dt_txt.slice(0,10);return r.a.createElement("div",{key:o,className:"cardWrap",onClick:function(){return function(a){var n=t.filter(function(e){return e.dt_txt.slice(0,10)===a});e.thisDay(n)}(s)}},r.a.createElement("div",{className:"singleCard"},r.a.createElement("p",null,o),r.a.createElement("img",{className:"fImg",id:a.weather[0].icon,src:(n=a.weather[0].icon,"https://openweathermap.org/img/w/".concat(n,".png")),alt:"icon"}),r.a.createElement("p",null,a.weather[0].main)))})))},ee=a(21),te=a(32),ae=a.n(te);ee.b.addAdapter(ae.a);var ne=function(e){var t=e.oneDayChart,a=e.date,n=e.minTemp,o=e.maxTemp;return r.a.createElement("div",{id:"headerWrap"},r.a.createElement("p",{id:"header"},"Temp for ",a),r.a.createElement(ee.a,{data:t,width:"350px",height:"195px",min:n,max:o,ytitle:"Temperature, \xb0F",stacked:!0}))},re=function(e){return r.a.createElement("div",{className:"autodetectScreen"},e.isFirstLoad?r.a.createElement("p",null,"Wait while we're detecting your location Or Input Address Yourself"):null)},oe=function(e){return r.a.createElement("div",{className:"errorScreen"},r.a.createElement("p",null,"Ooops, something went wrong..."),r.a.createElement("p",null,"Try entering another address"))},se=function(e){return r.a.createElement("div",{className:"searchScreen"},r.a.createElement("p",null,"Working..."))},ie=function(e){function t(e){var a;return Object(F.a)(this,t),(a=Object(S.a)(this,Object(T.a)(t).call(this,e))).componentDidUpdate=function(e,t){if(!e.error&&a.props.error&&a.setState({error:!0}),a.state.isFirstLoad&&null===e.geoData&&a.props.geoData&&!a.props.error&&a.setState({isFirstLoad:!1}),a.props.isLoading||a.props.weatherData===a.state.weatherData||a.setState({weatherData:a.props.weatherData},function(){a.props.weatherData&&a.props.weatherData.main?a.setState({temperature:a.state.weatherData.main.temp,humidity:a.state.weatherData.main.humidity,claudiness:a.state.weatherData.clouds.all,sunrise:a.state.weatherData.sys.sunrise,sunset:a.state.weatherData.sys.sunset,wind:{deg:a.state.weatherData.wind.deg,speed:(+a.state.weatherData.wind.speed/1.609344).toFixed(2)},weather:a.state.weatherData.weather,icon:a.state.weatherData.weather[0].icon}):a.props.error&&!a.props.isLoading&&a.setState({weatherData:null},function(){a.setState({temperature:null,humidity:null,claudiness:null,sunrise:null,sunset:null,wind:{},weather:[],icon:null})})}),!0===t.isFirstLoad&&!1===a.state.isFirstLoad&&document.querySelector(".autodetectScreen").classList.add("transparent"),!e.timeWeatherObject&&a.props.timeWeatherObject){var n=Object.values(a.props.timeWeatherObject),r=Math.max.apply(Math,Object(V.a)(n)).toFixed(2),o=(Math.min.apply(Math,Object(V.a)(n))-4).toFixed(2);a.timeScaleCreator(a.props.timeWeatherObject).then(function(e){return a.finalObjectConstructor(e,a.props.timeWeatherObject).then(function(e){a.setState({oneDayChart:e,minTemp:o,maxTemp:r})})})}},a.timeScaleCreator=function(){var e=Object(Q.a)(z.a.mark(function e(t){var a,n,r,o,s,i,c,u;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return[],n=[],r=Object.keys(t),o=/AM/,s=/PM/,a=r.filter(function(e){return e.match(o)}),(n=r.filter(function(e){return e.match(s)})).length>0&&(i=n.map(function(e){return Number(e.match(/^(\d+)/)[1])}),c=i.sort(function(e,t){return e-t}),n=c.map(function(e){return String(e)+":00 PM"})),u=[].concat(Object(V.a)(a),Object(V.a)(n)),e.next=11,u;case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.finalObjectConstructor=function(){var e=Object(Q.a)(z.a.mark(function e(t,a){var n,r,o;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=0;r<t.length-1;r++)(o=[])[0]=t[r],o[1]=Number(a[t[r]]),n.push(o);return e.next=4,n;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a.calculateTempF=function(){return(1.8*(a.state.temperature-273.15)+32).toFixed(2)},a.calculateTime=function(e){return Z()(1e3*+e).format("LT")},a.directionName=function(e){var t=Number((e/45).toFixed(2));t>7&&(t=1);var n=Number.isInteger(t)?t-1:Math.floor(t);return a.state.directionNames[n]},a.firstLetter=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)},a.makingObject=function(){var e=Object(Q.a)(z.a.mark(function e(t){var a;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},t.forEach(function(e){var t=e.dt,n=Z()(1e3*+t).format("LT"),r=(1.8*(e.main.temp-273.15)+32).toFixed(2);a[n]=r}),e.next=4,a;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.thisDay=function(e){var t=e[0].dt_txt.slice(0,10);a.makingObject(e).then(function(e){a.setState({timeWeatherObject:e,date:t},function(){a.props.onTimeWeatherObject(e)})}).catch(function(e){return a.setState({timeWeatherObject:{}})})},a.state={weatherData:null,temperature:null,humidity:null,claudiness:null,directionNames:["N","NE","E","SE","S","SW","W","NW"],wind:{},weather:[],icon:null,isFirstLoad:!0,error:!1,timeWeatherObject:{},keys:[],date:"",oneDayChart:[],minTemp:0,maxTemp:0},a}return Object(W.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=!!this.props.timeWeatherObject;return r.a.createElement("div",{id:"weatherWrap"},r.a.createElement(re,{isFirstLoad:this.state.isFirstLoad}),this.props.error&&r.a.createElement(oe,{isError:this.props.error}),!this.state.isFirstLoad&&!this.props.error&&!this.props.geoData&&r.a.createElement(se,null),this.props.weatherForecast?e?r.a.createElement(ne,{oneDayChart:this.state.oneDayChart,date:this.state.date,minTemp:this.state.minTemp,maxTemp:this.state.maxTemp}):r.a.createElement($,{forecast:this.props.weatherForecast,thisDay:this.thisDay}):r.a.createElement("div",null,r.a.createElement("p",{className:"weatherHeadline"},this.state.weather[0]?this.firstLetter(this.state.weather[0].description):"Current Weather"),r.a.createElement("div",{id:"mainBox"},r.a.createElement("div",{id:"parameters"},r.a.createElement("ul",null,r.a.createElement("li",null,"Temp: ",this.state.temperature&&this.calculateTempF()+" F"),r.a.createElement("li",null,"Humidity: ",this.state.humidity&&this.state.humidity+" %"),r.a.createElement("li",null,"Cloudiness: ",this.state.claudiness&&this.state.claudiness+" %"),r.a.createElement("li",null,"Sunrise: ",this.state.sunrise&&this.calculateTime(this.state.sunrise)),r.a.createElement("li",null,"Sunset: ",this.state.sunset&&this.calculateTime(this.state.sunset)),r.a.createElement("li",null,"Wind: ",this.state.wind.deg?this.directionName(this.state.wind.deg)+" "+Math.round(this.state.wind.deg)+"deg":"No Data"),r.a.createElement("li",null,"Speed: ",this.state.wind.speed&&this.state.wind.speed+" mph"))),r.a.createElement("div",{id:"icon"},this.state.icon&&r.a.createElement("img",{src:"https://openweathermap.org/img/w/".concat(this.state.icon,".png"),alt:"icon"})))))}}]),t}(n.Component),ce=Object(i.b)(function(e){return{geoData:e.geoData,weatherData:e.weatherData,error:e.error,isLoading:e.is_Loading,autodetect:e.autodetect,weatherForecast:e.weatherForecast,timeWeatherObject:e.timeWeatherObject}},function(e){return{onTimeWeatherObject:function(t){return e(q(t))}}})(ie),ue=function(){return r.a.createElement("div",{id:"wrapper"},r.a.createElement(j,null),r.a.createElement("main",{id:"mainSection"},r.a.createElement(Y,null),r.a.createElement(ce,null)),r.a.createElement(v,null))},le=(a(65),function(){return r.a.createElement(n.Fragment,null,r.a.createElement(ue,null))}),de=Object(c.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(l.a)({},e,{geoData:null,weatherData:null,is_Loading:!0,error:null,autodetect:!1,latlng:null,geoResults:null,weatherForecast:null,timeWeatherObject:null});case d:return Object(l.a)({},e,{geoData:t.payload.data.geoData,weatherData:t.payload.data.weatherData,is_Loading:!1,error:null,autodetect:!1,latlng:null,geoResults:t.payload.data.geoResults});case p:return Object(l.a)({},e,{error:t.payload,geoData:null,weatherData:null,is_Loading:!1,autodetect:!1,latlng:null,geoResults:null,timeWeatherObject:null});case g:return Object(l.a)({},e,{geoData:null,weatherData:null,is_Loading:!0,error:null,autodetect:!0,latlng:null,geoResults:null,weatherForecast:null,timeWeatherObject:null});case m:return Object(l.a)({},e,{geoData:t.payload.data.geoData,weatherData:t.payload.data.weatherData,is_Loading:!1,error:null,autodetect:!1,latlng:null,geoResults:t.payload.data.geoResults});case f:return Object(l.a)({},e,{error:t.payload,geoData:null,weatherData:null,is_Loading:!1,autodetect:!1,latlng:null,geoResults:null,timeWeatherObject:null});case w:return Object(l.a)({},e,{latlng:t.payload});case E:return Object(l.a)({},e,{weatherData:null,is_Loading:!0,error:null,autodetect:!1,latlng:null,weatherForecast:null});case y:return Object(l.a)({},e,{is_Loading:!1,weatherForecast:t.payload});case b:return Object(l.a)({},e,{weatherData:null,is_Loading:!1,autodetect:!1,weatherForecast:null,latlng:null,error:t.payload,timeWeatherObject:null});case O:return Object(l.a)({},e,{is_Loading:!1,timeWeatherObject:t.payload});default:return e}},Object(c.a)(u.a));s.a.render(r.a.createElement(i.a,{store:de},r.a.createElement(le,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.aac4bc92.chunk.js.map